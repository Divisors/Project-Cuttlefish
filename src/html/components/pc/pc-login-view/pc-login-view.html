<link rel="import" href="/components/polymer/polymer.html"/>
<pc-loader target='["pc-input","paper-button"]'></pc-loader>
<dom-module id="pc-login-view">
	<link rel="import" type="css" href="pc-login-view.css" inline/>
	<link rel="import" type="css" href="/css/components.css"/>
	<template>
		<form class="container transitions s-in" id="loginform" method="POST">
			<div class="form-group">
				<pc-input label="Username" name="username" id="usernameInput"></pc-input>
			</div>
			<div class="form-group">
				<pc-input label="Password" type="password" name="password" id="passwordInput"></pc-input>
			</div>
			<paper-button dialog-confirm>Sign In</paper-button>
		</form>
		<div class="transitions s-out slow" id="loginText">Logging in...</div>
	</template>
	<script>
		Polymer({
			is: 'pc-login-view',
			properties: {
				mobile: {
					type: Boolean,
					readOnly: true,
					reflectToAttribute: true
				},
			},
			ready: function() {
				$(this).find('#loginform > paper-button').on('click',this.login.bind(this));
			},
			login: function() {
				console.log('boop');
				var form = $(this).find('#loginform');
				var username = form.find("#usernameInput").val();
				var password = form.find("#passwordInput").val();
				form.removeClass('in').addClass('out');
				$(this).find('#loginText').removeClass('out').delay(5000).addClass('in');
				ResourceLoader.instance.login({
					username: username,
					password: password});
			}
		});
	</script>
</dom-module>